
FROM node:18-bullseye AS backend

WORKDIR /.

COPY package*.json ./
RUN npm install

COPY . .

ARG MONGODB_URL
ARG JWT_SECRET
ARG PAYPAL_CLIENT_ID
ARG SENDGRID_API_KEY
ARG ALLOWED_ORIGINS

ENV MONGODB_URL ${MONGODB_URL}
ENV JWT_SECRET ${JWT_SECRET}
ENV PAYPAL_CLIENT_ID ${PAYPAL_CLIENT_ID}
ENV SENDGRID_API_KEY ${SENDGRID_API_KEY}
ENV ALLOWED_ORIGINS ${ALLOWED_ORIGINS}

EXPOSE 4000

CMD ["npm", "run", "dev"]
